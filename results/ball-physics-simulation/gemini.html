<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouncing Ball Physics Simulation</title>
    <style>
        /* Basic styling for the page layout */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }

        /* The simulation container */
        #simulation-container {
            position: relative;
            width: 600px;
            height: 400px;
            border: 4px solid #333;
            background-color: white;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        /* The ball element */
        #ball {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: #ff4757;
            border-radius: 50%;
            cursor: grab;
        }

        /* Controls panel styling */
        .controls {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #444;
        }

        input[type="range"] {
            width: 120px;
        }

        button {
            grid-column: span 3;
            padding: 10px;
            background-color: #2f3542;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }

        button:hover {
            background-color: #57606f;
        }
    </style>
</head>

<body>

    <h2 style="margin-bottom: 10px;">Physics Engine: Bouncing Ball</h2>

    <div id="simulation-container">
        <div id="ball"></div>
    </div>

    <div class="controls">
        <div class="control-group">
            <label>Gravity</label>
            <input type="range" id="gravityInput" min="0" max="2" step="0.1" value="0.5">
        </div>
        <div class="control-group">
            <label>Bounce Power</label>
            <input type="range" id="bounceInput" min="0.1" max="0.95" step="0.05" value="0.7">
        </div>
        <div class="control-group">
            <label>Horizontal Speed</label>
            <input type="range" id="speedInput" min="0" max="15" step="1" value="5">
        </div>
        <button onclick="resetBall()">Reset Ball</button>
    </div>

    <script>
        // --- Configuration and State ---
        const ball = document.getElementById('ball');
        const container = document.getElementById('simulation-container');

        // Input elements
        const gravityInput = document.getElementById('gravityInput');
        const bounceInput = document.getElementById('bounceInput');
        const speedInput = document.getElementById('speedInput');

        // Physics variables
        let posX = 50;           // Horizontal position
        let posY = 50;           // Vertical position
        let velX = 5;            // Horizontal velocity
        let velY = 0;            // Vertical velocity
        let friction = 0.98;     // Air/Ground friction (slows down horizontal movement)

        const ballRadius = 20;   // Half of width/height
        const containerWidth = 600;
        const containerHeight = 400;

        /**
         * Resets the ball to the top-left corner with current slider values
         */
        function resetBall() {
            posX = 50;
            posY = 50;
            velX = parseFloat(speedInput.value);
            velY = 0;
        }

        /**
         * The Main Physics Loop
         * This function runs roughly 60 times per second
         */
        function update() {
            // 1. Get current values from sliders
            let gravity = parseFloat(gravityInput.value);
            let bounceFactor = parseFloat(bounceInput.value);

            // 2. Apply Gravity to Vertical Velocity
            velY += gravity;

            // 3. Apply Velocity to Position
            posX += velX;
            posY += velY;

            // 4. Collision Detection: Bottom Floor
            if (posY + (ballRadius * 2) > containerHeight) {
                // Snap ball to floor so it doesn't get stuck
                posY = containerHeight - (ballRadius * 2);
                // Reverse velocity and apply bounce factor (energy loss)
                velY *= -bounceFactor;

                // Apply friction only when touching the ground
                velX *= friction;
            }

            // 5. Collision Detection: Walls (Left/Right)
            if (posX + (ballRadius * 2) > containerWidth || posX < 0) {
                // Reverse horizontal direction
                velX *= -1;
                // Keep inside bounds
                posX = posX < 0 ? 0 : containerWidth - (ballRadius * 2);
            }

            // 6. Collision Detection: Ceiling (Optional)
            if (posY < 0) {
                posY = 0;
                velY *= -bounceFactor;
            }

            // 7. Update DOM element position
            // We use transform for better performance than 'top' and 'left'
            ball.style.transform = `translate(${posX}px, ${posY}px)`;

            // 8. Request next frame
            requestAnimationFrame(update);
        }

        // Start the simulation
        resetBall();
        update();

    </script>
</body>

</html>